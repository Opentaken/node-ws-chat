<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>  
      <div id="show">  
      </div>  
      <input type="text" id="message" name="" value="" placeholder="">  
      <input type="text" id="name" value="" placeholder="昵称;">  
      <a href="javascript:void(0)" onclick="send()">发送</a>  
      <a href="javascript:void(0)" onclick="exit()">退出</a>  
      <!-- <input type="text" id="token" name="" value="" placeholder="" readonly="false"> -->  
  </body>  
  <script type="text/javascript">
  var ws = new WebSocket("ws://192.168.1.112:3300",[user='cao----dan']);    
  ws.onopen = function() {  
      console.log("连接状态", ws);  
      console.log("open");  
      // ws.open("start");  
  };  
  ws.onmessage = function(evt) {
      console.log(evt)
      console.log('---')
  };  
  ws.onclose = function(evt) {  
      console.log("WebSocketClosed!");  
      console.log(evt);  
  };  
  ws.onerror = function(evt) {  
      console.log("WebSocketError!");  
  };  
    
  function send() {  
      var ii = document.getElementById("message").value;
      var ww = document.getElementById("name").value;
      var we = {
        qq : ii,
        id : ww,
        user : 'cao----dan',
        tou : 'wu----yu'
      }
      var nm = JSON.stringify(we)
      console.log("发送", nm);  
      ws.send(nm);  
  };  
    
  function exit() {  
      var r = ws.close();  
      console.log("退出", r);  
  }  
  </script>  
</html>